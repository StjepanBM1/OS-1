
    %define     P_BUILD '1.0.0'

    p_screen:
        call    _ui_clear
        
        xor     ax, ax
        xor     si, si
        xor     bx, bx
        xor     cx, cx

        mov     ah, 2
        mov     dh, 0
        mov     dl, 0
        int         10h

        mov     ah, 09h
        mov     al, 20h
        mov     cx, 80d
        mov     bl, 0x1F
        int         0x10

        mov     ah, 2
        mov     dh, 0
        mov     dl, 0
        int         0x10

        mov     si, p_title
        call        ui_puts

        .p_screen_l:

            cmp     dh, 24
            je      .p_screen_a

            mov     ah, 2
            inc     dh
            mov     dl, 0
            int         0x10

            mov     ah, 09h
            mov     al, 20h
            mov     cx, 80d
            mov     bl, 0xF0
            int         0x10 

            jmp     .p_screen_l

        .p_screen_a:

            call    p_cusor

        ret

    p_cusor:
        mov     ah, 01h
        mov     cx, 07h
        int         10h

        mov     bl, 0d
        mov     cl, 1d

        _p_mouse:
            mov     ah, 0x02
            mov     dl, bl
            mov     dh, cl
            int         0x10

            mov     ah, 0x00
            int         0x16

            cmp     ah, 0x48
            je          _up

            cmp     ah, 0x50
            je          _dw

            cmp     ah, 0x4B
            je          _lt

            cmp     ah, 0x4D
            je          _rt

            cmp     al, 27d
            je          _qt

            cmp     al, 112d
            je          _place

            cmp     al, 101d
            je          _erase

            jmp     _p_mouse

            _up:
                cmp cl, 1d
                je      _p_mouse

                sub cl, 1
                jmp     _p_mouse

            _dw:
                cmp cl, 24d
                je      _p_mouse

                add cl, 1
                jmp     _p_mouse

            _lt:
                cmp bl, 0h
                je      _p_mouse

                sub bl, 1
                jmp     _p_mouse

            _rt:
                cmp bl, 79d
                je      _p_mouse

                add bl, 1
                jmp     _p_mouse

            _qt:
                jmp     _ui_main

            _place:
                mov     ah, 0x0e
                mov     al, 219d
                int         0x10

                jmp     _p_mouse
            
            _erase:
                mov     ah, 0x0e
                mov     al, 32d
                int         0x10

                jmp     _p_mouse

        jmp     p_cusor

    p_title:    db  " [ OS/1 Paint | Build ",P_BUILD," ] [ ESC = Exit ] [ p = draw | e = erase ]", 0
